(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(46)},23:function(e,t,n){},25:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(10),i=n.n(r),l=(n(23),n(15)),u=n(11),c=n(12),s=n(14),m=n(13),f=n(16),d=(n(25),function(e){var t=e.name,n=e.phoneNumber,a=e.deletePerson;return o.a.createElement("tr",null,o.a.createElement("td",null,t),o.a.createElement("td",null,n),o.a.createElement("td",null,o.a.createElement("button",{onClick:a},"Poista")))}),h=function(e){var t=e.persons,n=e.deletePerson;return t.map(function(e){return o.a.createElement(d,{key:e.name,deletePerson:n(e),name:e.name,phoneNumber:e.phoneNumber})})},p=n(2),E=n.n(p),N="/api/persons",v={getAll:function(){return E.a.get(N)},create:function(e){return E.a.post(N,e)},update:function(e,t){return E.a.put("".concat(N,"/").concat(e),t).then(function(e){return e.data})},deleteById:function(e){return E.a.delete("".concat(N,"/").concat(e)).then(function(e){return e.data})}},b=function(e){var t=e.message;return null===t?null:o.a.createElement("div",{className:"info"},t)},w=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).handleFilterChange=function(e){n.setState({filter:e.target.value})},n.handleNameChange=function(e){n.setState({newName:e.target.value})},n.handlePhoneNumberChange=function(e){n.setState({newPhoneNumber:e.target.value})},n.resetInput=function(e){n.setState({persons:e,newName:"",newPhoneNumber:"",filter:"",notification:null,notificationType:"info"})},n.error=function(e){n.notify(e,"error")},n.notify=function(e,t){n.setState({notification:e,notificationType:t}),setTimeout(function(){n.setState({notification:null})},5e3)},n.info=function(e){n.notify(e,"info")},n.addName=function(e){e.preventDefault();var t=n.state.persons.find(function(e){return e.name===n.state.newName}),a={};if(t)console.log("on jo"),window.confirm("".concat(t.name," on jo luettelossa, korvataanko vanha numero uudella?"))&&(a=Object(l.a)({},t,{phoneNumber:n.state.newPhoneNumber}),v.update(t.id,a).then(function(e){var t=n.state.persons.filter(function(t){return t.id!==e.id});n.resetInput(t.concat(e)),n.info("P\xe4ivitettiin ".concat(e.name))}).catch(function(e){n.resetInput(n.state.persons.filter(function(e){return e.id!==t.id})),n.error("henkil\xf6 ".concat(t.name," on jo poistettu palvelimelta"))}));else{var o={name:n.state.newName,phoneNumber:n.state.newPhoneNumber};v.create(o).then(function(e){n.setState({persons:n.state.persons.concat(e.data),newName:"",newPhoneNumber:""}),n.info("lis\xe4ttiin ".concat(o.name))})}},n.deletePerson=function(e){return function(){window.confirm("Poistetaanko ".concat(e.name,"?"))&&v.deleteById(e.id).then(function(t){n.resetInput(n.state.persons.filter(function(t){return t.id!==e.id})),n.info("poistettiin ".concat(e.name))}).catch(function(t){n.resetInput(n.state.persons.filter(function(t){return t.id!==e.id})),n.error("henkil\xf6n ".concat(e.name," poisto ep\xe4onnistui"))})}},n.state={persons:[],newName:"",newPhoneNumber:"",filter:""},n}return Object(f.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("did mount"),v.getAll().then(function(t){console.log("promise fulfilled"),e.setState({persons:t.data})})}},{key:"render",value:function(){var e=this,t=this.state.persons.filter(function(t){return t.name.toUpperCase().includes(e.state.filter.toUpperCase())});return o.a.createElement("div",null,o.a.createElement("h2",null,"Puhelinluettelo"),o.a.createElement(b,{message:this.state.notification,type:this.state.notificationType}),o.a.createElement("div",null,o.a.createElement("p",null,"Etsi luettelosta"),o.a.createElement("input",{value:this.state.filter,onChange:this.handleFilterChange})),o.a.createElement("h3",null,"Lis\xe4\xe4 uusi puhelinnumero"),o.a.createElement("form",{onSubmit:this.addName},o.a.createElement("div",null,"Nimi:"," ",o.a.createElement("input",{value:this.state.newName,onChange:this.handleNameChange})),o.a.createElement("div",null,"Puhelinnumero:"," ",o.a.createElement("input",{value:this.state.newPhoneNumber,onChange:this.handlePhoneNumberChange})),o.a.createElement("div",null,o.a.createElement("button",{id:"add",type:"submit"},"Lis\xe4\xe4"))),o.a.createElement("h3",null,"Numerot"),o.a.createElement("table",{id:"customers"},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Nimi"),o.a.createElement("th",null,"Numero"),o.a.createElement("th",null,"Poista")),o.a.createElement(h,{persons:t,deletePerson:this.deletePerson}))))}}]),t}(o.a.Component);i.a.render(o.a.createElement(w,null),document.getElementById("root"))}},[[17,2,1]]]);
//# sourceMappingURL=main.724cd7ca.chunk.js.map